{% extends theme("layouts/1-column.html") %}
{% from theme('macros/paginator.html') import paginator with context %}
{% from theme('macros/sort_search.html') import sort_search %}

{% set toolbar_class='search-toolbar' %}

{% set meta = {
    'title': _('Organizations'),
    'description': _("%(site)s organization search", site=config['SITE_TITLE']),
    'keywords': [_('search'), _('organizations')],
    'robots': 'noindex',
} %}

{% set bundle = 'search' %}

{% block breadcrumb %}
<li class="active">
    {{ _('Organizations') }}
    <small>{{ _('%(start)s to %(end)s on %(total)s',
            start=organizations.page_start,
            end=organizations.page_end,
            total=organizations.total) }}</small>
</li>
{% endblock %}

{% block main_content %}
<section class="fr-container fr-py-2w">
    <h1 class="fr-mb-1w">{{_('Organizations')}}</h1>
    <div>{{_('Search an organization on %(site)s', site=current_site.title)}}</div>
    <div class="fr-pt-3v">
        <form method="GET" class="fr-griw-row">
            <div class="fr-search-bar fr-search-bar--lg w-100" role="search">
                <label class="fr-label" for="search-organizations">
                    {{ _('Search...') }}
                </label>
                <input
                    name="q"
                    class="fr-input"
                    placeholder="{{ _('Search...') }}"
                    type="search"
                    id="search-organizations"
                    value="{{organizations.query._query}}"
                />
                <button class="fr-btn" title="{{_('Search')}}" type="submit">
                    {{ _('Search') }}
                </button>
            </div>
            <div class="w-100 fr-grid-row fr-mt-7v fr-pt-3v justify-between align-items-center fr-grid-row--middle border-top border-default-grey">
                <p class="fr-m-0">{{ _('%(result)s results', result=organizations.total) }}</p>
                {{sort_search(organizations,
                created=(_('Creation date'), 'desc'),
                reuses=(_('Reuses'), 'desc'),
                followers=(_('Followers'), 'desc')
            )}}
            </div>
        </form>
    </div>
    <div class="row-inline pt-xl justify-between align-items-center">
        <h1 class="m-0 h2">{{ _('Organizations')}} <sup>{{organizations.total}}</sup></h1>
    </div>
    <ul class="search-results mt-lg">
        {% for organization in organizations %}
        <li>
            <a href="{{ url_for('organizations.show', org=organization) }}" title="{{ organization.title }}"
                class="unstyled w-100">{% include theme('organization/search-result.html') %}
            </a>
        </li>
        {% endfor %}
    </ul>
    {{ paginator(organizations) }}
</section>
{% endblock %}
